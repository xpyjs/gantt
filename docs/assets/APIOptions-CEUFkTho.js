import{d as H,s as C,b as O,c as l,o as n,n as Q,e as f,a as i,i as g,y as U,w as z,t as M,F as w,r as k,_ as P,q as I,p as Y,u as b,I as $,T as R,k as L,l as W,m as j,z as N,A as G,B as J}from"./index-uvrMBXIy.js";import{a as S}from"./api-NjQNMaKm.js";const K=["id"],X={class:"property-name"},Z={key:0,class:"required"},x={class:"property-type-info"},ee={key:0,class:"property-type"},te={key:0,class:"property-default"},se={class:"property-description"},ne=["innerHTML"],oe={key:0,class:"property-options"},re={key:0,class:"property-children"},ie=H({__name:"PropertyItem",props:{item:{},level:{},searchQuery:{}},setup(T){const p=T,h=C(()=>`h${Math.min(p.level+1,6)}`),t=C(()=>!!(p.item.children&&p.item.children.length>0)),c=o=>{if(!p.searchQuery)return o.replace(/\n/,"<br>");const d=new RegExp(`(${p.searchQuery})`,"gi");return o.replace(d,'<span class="search-highlight">$1</span>').replace(/\n/,"<br>")};return(o,d)=>{const v=O("PropertyItem",!0);return n(),l("div",{id:o.item.id,class:Q(["property-item",`level-${o.level}`])},[(n(),f(U(h.value),{class:"property-title"},{default:z(()=>[i("span",X,M(o.item.key),1),o.item.required?(n(),l("span",Z,"*")):g("",!0),i("div",x,[i("pre",null,[t.value?g("",!0):(n(),l("code",ee,M(o.item.type),1))]),o.item.defaultValue?(n(),l("code",te,M(o.item.defaultValue),1)):g("",!0)])]),_:1})),i("div",se,[i("p",{class:"description-text",innerHTML:c(o.item.description)},null,8,ne),o.item.options&&o.item.options.length?(n(),l("div",oe,[d[0]||(d[0]=i("strong",null,"可选值：",-1)),(n(!0),l(w,null,k(o.item.options,y=>(n(),l("span",{key:y,class:"option-tag"},M(y),1))),128))])):g("",!0)]),o.item.children&&o.item.children.length?(n(),l("div",re,[(n(!0),l(w,null,k(o.item.children,y=>(n(),f(v,{key:y.id,item:y,level:o.level+1,"search-query":o.searchQuery},null,8,["item","level","search-query"]))),128))])):g("",!0)],10,K)}}}),ae=P(ie,[["__scopeId","data-v-10200bde"]]),le={class:"nav-link-wrapper"},ce=["href"],de=["innerHTML"],ue={key:0,class:"required-indicator",title:"必填项"},he=["title"],pe={key:0,class:"nav-sublist"},me=H({__name:"MenuItemComponent",props:{item:{},activeSection:{},searchQuery:{}},emits:["toggle","navigate"],setup(T){const p=T,h=t=>{if(!p.searchQuery)return t;const c=p.searchQuery.toLowerCase(),d=t.toLowerCase().indexOf(c);if(d===-1)return t;const v=t.substring(0,d),y=t.substring(d,d+c.length),q=t.substring(d+c.length);return`${v}<mark class="search-highlight">${y}</mark>${q}`};return(t,c)=>{const o=O("MenuItemComponent",!0);return n(),l("li",{class:Q(["nav-item",`level-${t.item.level}`])},[i("div",le,[i("a",{href:`#${t.item.id}`,class:Q(["nav-link",{active:t.activeSection===t.item.id}]),onClick:c[0]||(c[0]=Y(d=>t.$emit("navigate",t.item.id),["prevent","stop"]))},[i("span",{class:"nav-title",innerHTML:h(t.item.title)},null,8,de),t.item.required?(n(),l("span",ue,"*")):g("",!0)],10,ce),t.item.hasChildren?(n(),l("button",{key:0,class:"expand-toggle",onClick:c[1]||(c[1]=d=>t.$emit("toggle",t.item.id)),title:t.item.expanded?"收起":"展开"},[I(b($),{icon:t.item.expanded?"material-symbols:keyboard-arrow-down":"material-symbols:keyboard-arrow-right",width:"16",height:"16"},null,8,["icon"])],8,he)):g("",!0)]),I(R,{name:"expand"},{default:z(()=>[t.item.hasChildren&&t.item.expanded?(n(),l("ul",pe,[(n(!0),l(w,null,k(t.item.children,d=>(n(),f(o,{key:d.id,item:d,"active-section":t.activeSection,"search-query":t.searchQuery,onToggle:c[2]||(c[2]=v=>t.$emit("toggle",v)),onNavigate:c[3]||(c[3]=v=>t.$emit("navigate",v))},null,8,["item","active-section","search-query"]))),128))])):g("",!0)]),_:1})],2)}}}),A=P(me,[["__scopeId","data-v-6cd794eb"]]),ve={class:"api-page"},ye={class:"api-content"},ge={class:"api-layout"},fe={class:"api-sidebar"},we={class:"sidebar-content"},ke={class:"sidebar-header"},_e={style:{display:"flex"}},be={class:"search-box"},$e={class:"api-nav"},Ce={key:0,class:"nav-list"},Ie={key:1,class:"nav-list"},Te={class:"api-main"},qe={class:"api-sections"},Me=H({__name:"APIOptions",setup(T){const p=L(""),h=L(""),t=L(!1),c=L({}),o=()=>{const r={},e=s=>{r[s.id]=!1,s.children&&s.children.forEach(u=>{e(u)})};S.forEach(s=>{e(s)}),c.value=r},d=r=>{c.value[r]=!c.value[r]},v=C(()=>{const r=(e,s=0)=>{const u=!!(e.children&&e.children.length>0),a={id:e.id,title:e.key,path:e.id,level:s,hasChildren:u,expanded:c.value[e.id]||!1,required:e.required||!1,children:[]};return u&&c.value[e.id]&&e.children.forEach(m=>{a.children.push(r(m,s+1))}),a};return S.map(e=>r(e))}),y=C(()=>{if(!h.value)return[];const r=(e,s=0)=>{const u=!!(e.children&&e.children.length>0),a={id:e.id,title:e.key,path:e.id,level:s,hasChildren:u,expanded:!0,required:e.required||!1,children:[]};return u&&e.children&&e.children.forEach(m=>{a.children.push(r(m,s+1))}),a};return q.value.map(e=>r(e))}),q=C(()=>{if(!h.value)return S;const r=h.value.toLowerCase(),e=a=>{var m;return a.key.toLowerCase().includes(r)||a.title.toLowerCase().includes(r)||a.type.toLowerCase().includes(r)||a.description.toLowerCase().includes(r)||(((m=a.defaultValue)==null?void 0:m.toLowerCase().includes(r))??!1)},s=a=>e(a)?!0:a.children?a.children.some(m=>s(m)):!1,u=a=>a.reduce((m,_)=>{if(s(_)){const V={..._};_.children&&_.children.length>0&&(V.children=u(_.children)),m.push(V)}return m},[]);return u(S)}),D=()=>{h.value="",setTimeout(()=>{B()},50)},E=r=>{const e=document.getElementById(r);if(e){const u=e.offsetTop-90;window.scrollTo({top:u,behavior:"smooth"})}},F=()=>{window.scrollTo({top:0,behavior:"smooth"})},B=()=>{const r=window.pageYOffset+150,e=document.querySelectorAll(".property-item");let s="";for(let u=e.length-1;u>=0;u--){const a=e[u];if(a.offsetTop<=r&&a.id){s=a.id;break}}s&&(p.value=s),t.value=window.pageYOffset>400};return W(()=>{if(o(),window.addEventListener("scroll",B),window.location.hash){const r=window.location.hash.substring(1);setTimeout(()=>{E(r)},100)}}),j(()=>{window.removeEventListener("scroll",B)}),(r,e)=>(n(),l("div",ve,[i("section",ye,[i("div",null,[i("div",ge,[i("aside",fe,[i("div",we,[i("div",ke,[i("div",_e,[I(b($),{icon:"line-md:u-turn-left",width:"28",height:"28",class:"back-icon",onClick:e[0]||(e[0]=s=>r.$router.push("/api"))}),e[2]||(e[2]=i("h3",null,"目录",-1))]),i("div",be,[N(i("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>h.value=s),type:"text",placeholder:"搜索配置项...",class:"search-input"},null,512),[[G,h.value]]),h.value?(n(),l("button",{key:1,onClick:D,class:"clear-button",title:"清空搜索"},[I(b($),{icon:"material-symbols:close",width:"16",height:"16"})])):(n(),f(b($),{key:0,icon:"material-symbols:search",class:"search-icon",width:"18",height:"18"}))])]),i("nav",$e,[h.value?(n(),l("ul",Ce,[(n(!0),l(w,null,k(y.value,s=>(n(),f(A,{key:s.id,item:s,"active-section":p.value,"search-query":h.value,onToggle:d,onNavigate:E},null,8,["item","active-section","search-query"]))),128))])):(n(),l("ul",Ie,[(n(!0),l(w,null,k(v.value,s=>(n(),f(A,{key:s.id,item:s,"active-section":p.value,onToggle:d,onNavigate:E},null,8,["item","active-section"]))),128))]))])])]),i("main",Te,[i("div",qe,[(n(!0),l(w,null,k(q.value,s=>(n(),f(ae,{key:s.id,item:s,level:1,"search-query":h.value},null,8,["item","search-query"]))),128))])])])])]),N(i("button",{onClick:F,class:"back-to-top",title:"回到顶部"},[I(b($),{icon:"material-symbols:keyboard-arrow-up",width:"24",height:"24"})],512),[[J,t.value]])]))}}),Ee=P(Me,[["__scopeId","data-v-17e4a21a"]]);export{Ee as default};
